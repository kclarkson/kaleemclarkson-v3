<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cecil Page Editor | Kaleem Clarkson</title>

    <!-- Toast UI Editor CSS -->
    <link rel="stylesheet" href="https://uicdn.toast.com/editor/latest/toastui-editor.min.css" />

    <!-- Custom Editor Styles -->
    <link rel="stylesheet" href="styles.css" />
</head>
<body>
    <!-- Header -->
    <div class="header">
        <h1>ğŸ“ Cecil Page Editor</h1>
        <p>Edit your Markdown pages and data files with live preview</p>
    </div>

    <!-- Main Container -->
    <div class="container">
        <!-- Sidebar -->
        <div class="sidebar">
            <!-- Tabs -->
            <div class="sidebar-tabs">
                <div class="sidebar-tab active" id="pages-tab" onclick="switchToPages()">ğŸ“„ Pages</div>
                <div class="sidebar-tab" id="data-tab" onclick="switchToData()">ğŸ“Š Data Files</div>
            </div>

            <!-- Pages Tab -->
            <div class="tab-content active" id="pages-content">
                <div class="new-page-section">
                    <h2>â• Create New Page</h2>
                    <input
                        type="text"
                        id="new-page-path"
                        class="new-page-input"
                        placeholder="e.g., about.md or blog/post.md"
                    />
                    <button class="btn btn-primary" onclick="createNewPage()">
                        <span>âœ¨</span> Create Page
                    </button>
                </div>

                <h2>ğŸ“„ Your Pages</h2>
                <div id="pages-loading" class="loading">
                    Loading pages...
                </div>
                <ul class="page-list" id="page-list" style="display: none;"></ul>
            </div>

            <!-- Data Tab -->
            <div class="tab-content" id="data-content">
                <h2>ğŸ“Š Data Files</h2>
                <div id="data-loading" class="loading">
                    Loading data files...
                </div>
                <ul class="page-list" id="data-list" style="display: none;"></ul>
            </div>
        </div>

        <!-- Editor Panel -->
        <div class="editor-panel">
            <!-- Markdown Editor Container -->
            <div id="editor-container" style="display: flex; flex-direction: column; height: 100%;">
                <!-- Title Input -->
                <div class="editor-toolbar">
                    <input
                        type="text"
                        id="page-title"
                        class="toolbar-input"
                        placeholder="Page title..."
                    />
                </div>

                <div id="status" class="status"></div>

                <!-- Scrollable Content Area -->
                <div class="editor-content">
                    <!-- Frontmatter Editor -->
                    <div class="frontmatter-section" id="frontmatter-section">
                        <div class="frontmatter-header">
                            <h3>âš™ï¸ Frontmatter (YAML)</h3>
                            <button class="frontmatter-toggle" onclick="toggleFrontmatter()">
                                <span id="frontmatter-toggle-text">Hide</span>
                            </button>
                        </div>
                        <div id="frontmatter-container">
                            <textarea
                                id="frontmatter-editor"
                                class="frontmatter-editor"
                                placeholder="title: &quot;Page Title&quot;&#10;date: 2025-11-11&#10;published: true"
                            ></textarea>
                            <p class="frontmatter-hint">
                                ğŸ’¡ Edit the YAML frontmatter directly. This preserves all nested fields like <code>hero:</code> configuration.
                            </p>
                        </div>
                    </div>

                    <!-- Editor -->
                    <div class="editor-wrapper">
                        <div id="editor"></div>
                    </div>
                </div>

                <!-- Action Buttons at Bottom -->
                <div class="editor-actions">
                    <button class="btn btn-success toolbar-btn" onclick="savePage()">
                        ğŸ’¾ Save
                    </button>
                    <button class="btn btn-danger toolbar-btn" onclick="deletePage()">
                        ğŸ—‘ï¸ Delete
                    </button>
                </div>
            </div>

            <!-- Data Editor Container -->
            <div id="data-editor-container" style="display: none; flex-direction: column; height: 100%;">
                <div id="status-data" class="status"></div>
                <div id="data-fields" style="flex: 1; overflow-y: auto; padding: 20px 30px;"></div>
            </div>
        </div>

    </div>

    <!-- Toast UI Editor JS -->
    <script src="https://uicdn.toast.com/editor/latest/toastui-editor-all.min.js"></script>
    <script src="app.js?v=7"></script>
</body>
</html>
